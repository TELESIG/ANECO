% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/soundclassifier_pred.R
\name{soundclassifier_predict}
\alias{soundclassifier_predict}
\title{Predict rain-dominated minutes from acoustic indices}
\usage{
soundclassifier_predict(data = NULL, mod = NULL)
}
\arguments{
\item{data}{A data.frame produced by \code{\link[ANECO]{acoustic_indices}} with \code{noise.ind = TRUE}. It must include:
\itemize{
  \item identification columns: \code{Name}, \code{Code}, \code{Site},
    \code{RecorderID}, \code{Date}, \code{Year}, \code{Month}, \code{Day}, \code{Hour}, \code{Minute}
  \item predictor columns required by the classifier (see \strong{Details})
}}

\item{mod}{A fitted classification model compatible with
\code{predict(mod, newdata, type = "prob")} and
\code{predict(mod, newdata, type = "raw")}. In the ANECO workflow this is the \code{$model} element returned by
\code{\link[ANECO]{soundclassifier_fit}} (a \pkg{caret} \code{train} object).}
}
\value{
A data.frame with one row per minute, containing:
\itemize{
  \item the identification columns from \code{data}
  \item one probability column per class, prefixed with \code{prob_}
  \item \code{predicted_class}: the predicted class label (character)
}
}
\description{
Uses a previously fitted classifier (typically a Random Forest model trained with \code{\link[ANECO]{soundclassifier_fit}}) to predict class probabilities and the final class label for each 1-minute segment in an acoustic index dataset.
}
\details{
The workflow is optimized for rain detection (i.e., identifying minutes dominated by \code{"Rain"}). However, if the fitted model includes additional classes (e.g., user-defined noise sources), probabilities are returned for all classes learned by the model.


\strong{Predictors.} The function uses a fixed subset of noise-related indices:
\code{msldB_bio}, \code{msldB_low}, \code{mdBGL}, \code{SpecIQR}, \code{SpecKurt},
\code{SpecSkew}, \code{SpecQ3}, \code{SpecCent}, \code{S2N_chi}, \code{dfreq},
\code{E01}, \code{E12}, \code{E23}, \code{E34}, \code{E45}, \code{E56}, \code{E67},
\code{E78}, \code{E89}, \code{E910}, \code{E1011}.

\strong{Output probabilities.} Class probabilities are returned in columns prefixed
with \code{prob_} (e.g., \code{prob_Rain}). The number and names of probability columns depend on the classes present in the fitted model.

If columns named \code{prob_*} or \code{predicted_class} already exist in \code{data},
they will be overwritten in the returned object.
}
\examples{
\dontrun{
set.seed(123)

data("indices_data", package = "ANECO")
data("labeled_data", package = "ANECO")

# Train a binary rain detector (recommended use)
fit <- soundclassifier_fit(ref = labeled_data,
                           ind = indices_data,
                           classes = c("Clean","Rain"),
                           nmax = "even")

# Predict on a full index dataset
pred <- soundclassifier_predict(data = indices_data,
                                 mod = fit$model)

head(pred)
}

}
